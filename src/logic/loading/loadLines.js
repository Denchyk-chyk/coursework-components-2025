/**
 * Асинхронна функція для завантаження текстового файлу і повернення його рядків у вигляді масиву.
 *
 * @param {string} fileName - Назва (або шлях) файлу для завантаження.
 * @returns {Promise<string[]>} - Обіцянка, що розв’язується масивом непорожніх рядків файлу.
 *
 * Функція виконує HTTP-запит для отримання вмісту файлу, перевіряє успішність відповіді,
 * перетворює текст на масив рядків, очищає їх від порожніх рядків і повертає результат.
 *
 * Викидає помилку, якщо файл не вдалося завантажити (наприклад, через мережеві проблеми або помилку сервера).
 */
export async function loadLines(fileName) {
  // Виконується HTTP GET-запит до вказаного файлу (шлях з кореня сайту)
  const response = await fetch(`/${fileName}`);

  // Перевірка статусу відповіді: якщо не 2xx, викидається помилка
  if (!response.ok) {
    throw new Error(`Не вдалося завантажити файл: ${fileName}`);
  }

  // Отримання текстового вмісту файлу
  const text = await response.text();

  // Розбиття тексту на рядки за допомогою регулярного виразу,
  // що підтримує як Unix (\n), так і Windows (\r\n) символи нового рядка,
  // та фільтрація порожніх або рядків, що складаються лише з пробілів
  return text.split(/\r?\n/).filter((line) => line.trim() !== "");
}
